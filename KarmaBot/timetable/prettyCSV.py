import csv, datetime

filename = '/timetable/' + datetime.datetime.today().strftime('%Y-%m-%d') + '.csv'
# print(filename)	
# intakeCode = 'UC2F1805CS'
allIntakeCode = ['AFCF1709AS', 'AFCF1709ICT', 'AFCF1711AS', 'AFCF1711ICT', 'AFCF1801AS', 'AFCF1801ICT', 'AFCF1805AS', 'AFCF1805ICT', 'AFCF1809AS', 'AFCF1809ICT', 'APT1F1801ABM', 'APT1F1801ANM', 'APT1F1801DFA', 'APT1F1801PD', 'APT1F1801TD', 'APT1F1801VFX', 'APT1F1802BIT', 'APT1F1802CYB', 'APT1F1802FRC', 'APT1F1802IR', 'APT1F1805ABM', 'APT1F1805ANM', 'APT1F1805BIT', 'APT1F1805CYB', 'APT1F1805DFA', 'APT1F1805FRC', 'APT1F1805IR', 'APT1F1805PD', 'APT1F1805TD', 'APT1F1805VFX', 'APT1F1809BIT', 'APT1F1809CYB', 'APT1F1809FRC', 'APT1F1809IR', 'APT1F1811ABM(PF1)', 'APT1F1811ANM(PF1)', 'APT1F1811DFA(PF1)', 'APT1F1811PD(PF1)', 'APT1F1811TD(PF1)', 'APT1F1811VFX(PF1)', 'APT2F1801BIT', 'APT2F1801CYB', 'APT2F1801FRC', 'APT2F1801IR', 'APT2F1805ABM', 'APT2F1805ANM', 'APT2F1805BIT', 'APT2F1805CYB', 'APT2F1805DFA', 'APT2F1805FRC', 'APT2F1805IR', 'APT2F1805PD', 'APT2F1805TD', 'APT2F1805VFX', 'APT2F1808BIT', 'APT2F1808CYB', 'APT2F1808FRC', 'APT2F1808IR', 'APT2F1810ABM', 'APT2F1810ANM', 'APT2F1810DFA', 'APT2F1810PD', 'APT2F1810TD', 'APT2F1810VFX', 'APT3F1801ABM', 'APT3F1801BIT', 'APT3F1801CYB', 'APT3F1801FRC', 'APT3F1801IR', 'APT3F1801PD', 'APT3F1801VFX', 'APT3F1802BIT', 'APT3F1802CYB', 'APT3F1802FRC', 'APT3F1804ANM', 'APT3F1805BCM', 'APT3F1805BIT', 'APT3F1805CYB', 'APT3F1805FRC', 'APT3F1805IR', 'APT3F1805PD', 'APT3F1805VFX', 'APT3F1810BIT', 'APT3F1810CYB', 'APT3F1810FRC', 'APT3F1810IR', 'APTD1F1709EE', 'APTD1F1711EE', 'APTD1F1804EE', 'APTD1F1805EE', 'APTD1F1809EE', 'APTD2F1709EE', 'APTD2F1801EE', 'APTD2F1807EE', 'APTD2F1809EE', 'APTDF1611DSM(ABM)', 'APTDF1611DSM(VFX)', 'APTDF1611IRS', 'APTDF1705DSM(ABM)', 'APTDF1705DSM(ANM)', 'APTDF1705DSM(PD)', 'APTDF1705DSM(TD)', 'APTDF1705DSM(VFX)', 'APTDF1705IRS', 'APTDF1711DSM(ABM)', 'APTDF1711DSM(ANM)', 'APTDF1711DSM(PD)', 'APTDF1711DSM(VFX)', 'APTDF1711IRS', 'APTDF1805DSM', 'APTDF1805IRS', 'UC1F1802ACS', 'UC1F1802AF', 'UC1F1802BAF', 'UC1F1802BM', 'UC1F1802CGD', 'UC1F1802CS', 'UC1F1802CS(DA)', 'UC1F1802EEE', 'UC1F1802HRM', 'UC1F1802IBF', 'UC1F1802IBM', 'UC1F1802INT', 'UC1F1802IS', 'UC1F1802IT', 'UC1F1802IT(IOT)', 'UC1F1802KMGT', 'UC1F1802MDM', 'UC1F1802ME', 'UC1F1802MMT', 'UC1F1802PE', 'UC1F1802SE', 'UC1F1802TE', 'UC1F1802TRM', 'UC1F1809ACS', 'UC1F1809AF', 'UC1F1809BAF', 'UC1F1809BM', 'UC1F1809CE', 'UC1F1809CGD', 'UC1F1809CS', 'UC1F1809CS(DA)', 'UC1F1809EEE', 'UC1F1809HRM', 'UC1F1809IBF', 'UC1F1809IBM', 'UC1F1809IS', 'UC1F1809IT', 'UC1F1809IT(IOT)', 'UC1F1809KMGT', 'UC1F1809MDM', 'UC1F1809ME', 'UC1F1809MMT', 'UC1F1809PE', 'UC1F1809SE', 'UC1F1809TE', 'UC1F1809TRM', 'UC2F1801ACS', 'UC2F1801AF', 'UC2F1801AF(FA)', 'UC2F1801AF(FI)', 'UC2F1801AF(IA)', 'UC2F1801AF(TAX)', 'UC2F1801BAF', 'UC2F1801BAF(FP)', 'UC2F1801BAF(IRM)', 'UC2F1801BM', 'UC2F1801BM(EBUS)', 'UC2F1801CGD', 'UC2F1801CS', 'UC2F1801CS(DA)', 'UC2F1801EEE', 'UC2F1801HRM', 'UC2F1801IBF', 'UC2F1801IBM', 'UC2F1801IS', 'UC2F1801IT', 'UC2F1801IT(BIS)', 'UC2F1801IT(CC)', 'UC2F1801IT(DBA)', 'UC2F1801IT(ISS)', 'UC2F1801IT(MBT)', 'UC2F1801IT(NC)', 'UC2F1801KMGT', 'UC2F1801MDM', 'UC2F1801ME', 'UC2F1801MMT', 'UC2F1801PE', 'UC2F1801SE', 'UC2F1801TE', 'UC2F1801TRM', 'UC2F1805ACS', 'UC2F1805AF', 'UC2F1805AF(FA)', 'UC2F1805AF(FI)', 'UC2F1805AF(IA)', 'UC2F1805AF(TAX)', 'UC2F1805BAF', 'UC2F1805BAF(IRM)', 'UC2F1805BM', 'UC2F1805BM(EBUS)', 'UC2F1805CGD', 'UC2F1805CS', 'UC2F1805CS(DA)', 'UC2F1805EE(IT)', 'UC2F1805EEE', 'UC2F1805HRM', 'UC2F1805IBM', 'UC2F1805IS', 'UC2F1805IT', 'UC2F1805IT(BIS)', 'UC2F1805IT(CC)', 'UC2F1805IT(DBA)', 'UC2F1805IT(FC)', 'UC2F1805IT(ISS)', 'UC2F1805IT(MBT)', 'UC2F1805IT(NC)', 'UC2F1805KMGT', 'UC2F1805MDM', 'UC2F1805ME', 'UC2F1805MMT', 'UC2F1805PE', 'UC2F1805SE', 'UC2F1805TE', 'UC2F1805TRM', 'UC2F1808ACS', 'UC2F1808AF', 'UC2F1808AF(FA)', 'UC2F1808AF(FI)', 'UC2F1808AF(IA)', 'UC2F1808AF(TAX)', 'UC2F1808BAF', 'UC2F1808BAF(FP)', 'UC2F1808BAF(IRM)', 'UC2F1808BM', 'UC2F1808BM(EBUS)', 'UC2F1808CGD', 'UC2F1808CS', 'UC2F1808CS(DA)', 'UC2F1808EE(IT)', 'UC2F1808EEE', 'UC2F1808HRM', 'UC2F1808IBF', 'UC2F1808IBM', 'UC2F1808IS', 'UC2F1808IT', 'UC2F1808IT(BIS)', 'UC2F1808IT(CC)', 'UC2F1808IT(DBA)', 'UC2F1808IT(FC)', 'UC2F1808IT(IOT)', 'UC2F1808IT(ISS)', 'UC2F1808IT(MBT)', 'UC2F1808IT(NC)', 'UC2F1808KMGT', 'UC2F1808MDI', 'UC2F1808MDM', 'UC2F1808ME', 'UC2F1808MMT', 'UC2F1808PE', 'UC2F1808SE', 'UC2F1808TE', 'UC2F1808TRM', 'UC3F1801ACS', 'UC3F1801AF', 'UC3F1801AF(FA)', 'UC3F1801AF(FI)', 'UC3F1801AF(IA)', 'UC3F1801AF(TAX)', 'UC3F1801BAF', 'UC3F1801BAF(IRM)', 'UC3F1801BM', 'UC3F1801BM(EBUS)', 'UC3F1801CS', 'UC3F1801EEE', 'UC3F1801HRM', 'UC3F1801IBF', 'UC3F1801IBM', 'UC3F1801IS', 'UC3F1801IT', 'UC3F1801IT(BIS)', 'UC3F1801IT(DBA)', 'UC3F1801IT(ISS)', 'UC3F1801IT(MBT)', 'UC3F1801IT(NC)', 'UC3F1801KMGT', 'UC3F1801MDM', 'UC3F1801ME', 'UC3F1801MMT', 'UC3F1801PE', 'UC3F1801SE', 'UC3F1801SM', 'UC3F1801TC', 'UC3F1801TE', 'UC3F1801TRM', 'UC3F1802ACS', 'UC3F1802AF', 'UC3F1802AF(FA)', 'UC3F1802AF(FI)', 'UC3F1802AF(TAX)', 'UC3F1802BAF(IRM)', 'UC3F1802BM', 'UC3F1802BM(EBUS)', 'UC3F1802CS', 'UC3F1802HRM', 'UC3F1802IBM', 'UC3F1802INT', 'UC3F1802IS', 'UC3F1802IT', 'UC3F1802IT(BIS)', 'UC3F1802IT(DBA)', 'UC3F1802IT(ISS)', 'UC3F1802IT(MBT)', 'UC3F1802IT(NC)', 'UC3F1802KMGT', 'UC3F1802MDI', 'UC3F1802MDM', 'UC3F1802MMT', 'UC3F1802SE', 'UC3F1802TRM', 'UC3F1804EE(IT)', 'UC3F1804EEE', 'UC3F1804ME', 'UC3F1804PE', 'UC3F1804TE', 'UC3F1805ACS', 'UC3F1805AF', 'UC3F1805AF(FA)', 'UC3F1805AF(FI)', 'UC3F1805AF(IA)', 'UC3F1805AF(TAX)', 'UC3F1805BAF', 'UC3F1805BAF(FP)', 'UC3F1805BAF(IRM)', 'UC3F1805BM', 'UC3F1805BM(EBUS)', 'UC3F1805CGD', 'UC3F1805CS', 'UC3F1805CS(DA)', 'UC3F1805HRM', 'UC3F1805IBF', 'UC3F1805IBM', 'UC3F1805INT', 'UC3F1805IS', 'UC3F1805IT', 'UC3F1805IT(BIS)', 'UC3F1805IT(DBA)', 'UC3F1805IT(ISS)', 'UC3F1805IT(MBT)', 'UC3F1805IT(NC)', 'UC3F1805KMGT', 'UC3F1805MDI', 'UC3F1805MDM', 'UC3F1805MMT', 'UC3F1805SE', 'UC3F1805SM', 'UC3F1805TC', 'UC3F1805TRM', 'UC3F1808EEE', 'UC3F1808ME', 'UC3F1808PE', 'UC3F1808TE', 'UC3F1810ACS', 'UC3F1810AF', 'UC3F1810AF(FA)', 'UC3F1810AF(FI)', 'UC3F1810AF(IA)', 'UC3F1810AF(TAX)', 'UC3F1810BAF', 'UC3F1810BAF(FP)', 'UC3F1810BAF(IRM)', 'UC3F1810BM', 'UC3F1810BM(EBUS)', 'UC3F1810CGD', 'UC3F1810CS', 'UC3F1810CS(DA)', 'UC3F1810HRM', 'UC3F1810IBF', 'UC3F1810IBM', 'UC3F1810IS', 'UC3F1810IT', 'UC3F1810IT(BIS)', 'UC3F1810IT(DBA)', 'UC3F1810IT(ISS)', 'UC3F1810IT(MBT)', 'UC3F1810IT(NC)', 'UC3F1810KMGT', 'UC3F1810MDI', 'UC3F1810MDM', 'UC3F1810MMT', 'UC3F1810SE', 'UC3F1810TRM', 'UC4F1802EE(IT)', 'UC4F1802EEE', 'UC4F1802ME', 'UC4F1802TE', 'UC4F1806EEE', 'UC4F1806ME', 'UC4F1806PE', 'UC4F1806TE', 'UCDF1611BIT', 'UCDF1611BSA', 'UCDF1611ICT', 'UCDF1611ICT(SE)', 'UCDF1704ACC', 'UCDF1704BIT', 'UCDF1704BSA', 'UCDF1704ICT', 'UCDF1704ICT(DI)', 'UCDF1704ICT(SE)', 'UCDF1705ACC', 'UCDF1705BIT', 'UCDF1705BSA', 'UCDF1705FIN', 'UCDF1705ICT', 'UCDF1705ICT(DI)', 'UCDF1705ICT(SE)', 'UCDF1709ACC', 'UCDF1709BIT', 'UCDF1709BSA', 'UCDF1709FIN', 'UCDF1709ICT', 'UCDF1709ICT(DI)', 'UCDF1709ICT(SE)', 'UCDF1711ACC', 'UCDF1711BIT', 'UCDF1711BSA', 'UCDF1711FIN', 'UCDF1711ICT', 'UCDF1711ICT(DI)', 'UCDF1711ICT(SE)', 'UCDF1804ACC', 'UCDF1804BIT', 'UCDF1804BSA', 'UCDF1804FIN', 'UCDF1804ICT', 'UCDF1804ICT(DI)', 'UCDF1804ICT(ITR)', 'UCDF1804ICT(SE)', 'UCDF1805ACC', 'UCDF1805BIT', 'UCDF1805BSA', 'UCDF1805FIN', 'UCDF1805ICT', 'UCDF1805ICT(DI)', 'UCDF1805ICT(ITR)', 'UCDF1805ICT(SE)', 'UCDF1809ACC', 'UCDF1809BIT', 'UCDF1809BSA', 'UCDF1809FIN', 'UCDF1809ICT', 'UCDF1809ICT(DI)', 'UCDF1809ICT(ITR)', 'UCDF1809ICT(SE)', 'UCF1807BM(A)', 'UCFEFREI1808', 'UCFF1801BF', 'UCFF1801CT', 'UCFF1801DS', 'UCFF1801ENG', 'UCFF1801IS', 'UCFF1804BF', 'UCFF1804CT', 'UCFF1804DS', 'UCFF1804ENG', 'UCFF1805BF', 'UCFF1805CT', 'UCFF1805DS', 'UCFF1805ENG', 'UCFF1805IS', 'UCFF1809BF', 'UCFF1809CT', 'UCFF1809DS', 'UCFF1809ENG', 'UCFF1809IS', 'UCMF1711DSBA', 'UCMF1804ACC', 'UCMF1804AFA', 'UCMF1804DSBA', 'UCMF1804EAMBA', 'UCMF1804FIN', 'UCMF1804GMM', 'UCMF1804IBC', 'UCMF1804IBF', 'UCMF1804ITM', 'UCMF1804MBA', 'UCMF1804PM', 'UCMF1804SE', 'UCMF1804TM', 'UCMF1808ACC', 'UCMF1808AFA', 'UCMF1808DSBA', 'UCMF1808EAMBA', 'UCMF1808FIN', 'UCMF1808GMM', 'UCMF1808IBC', 'UCMF1808IBF', 'UCMF1808ITM', 'UCMF1808MBA', 'UCMF1808PM', 'UCMF1808SE', 'UCMF1808TM', 'UCMP1808', 'UCP1809ASEP1A']
ignoredModule = ['CT110-3-2-VTC-L', 'CT110-3-2-VTC-LAB', 'CT029-3-2-ISE-L', 'CT029-3-2-ISE-LAB', 'MPU3412-CC2', 'CT050-3-2-WAPP-L', 'CT050-3-2-WAPP-LAB', 'MPU3123-TITAS(LS)', 'MPU3143-BMK2(FS)']

def checkIfModuleExist(intakeCode):
	if intakeCode.upper() in allIntakeCode:
		return 1
	else:
		return 0

def getTimetable(intakeCode):
	message = ''
	with open("timetable/2018-10-08.csv", newline='') as csv_file:
	    csv_reader = csv.reader(csv_file, delimiter=',')
	    for row in csv_reader:
	    	if (row[1].upper() == intakeCode):
	        	if datetime.datetime.today().strftime('%d-%m-%Y') in row[2]:
	        		if row[6] not in ignoredModule:
	        			message += ('Module Code: ' + row[6] + '\n' + 'Date: ' + row[2] + '\n' + 'Time: ' + row[3] + '\n' + 'Location: ' + row [5] + '\n' + 'Lecturer: ' + row [6] + '\n\n')
	if message != '':
		print('Message sent!')
	return message